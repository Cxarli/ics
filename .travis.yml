language: rust
cache: cargo
before_script:
  - cargo update || true
rust:
  - stable
  - beta
  - nightly
  - 1.26.0
matrix:
  include:
    - rust: nightly
      before_script:
        - rustup install nightly --profile default
      script:
        - cargo +nightly fmt -- --check
        - cargo test --no-default-features --verbose
  allow_failures:
    - rust: nightly
