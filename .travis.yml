language: rust
cache: cargo
before_script:
  - cargo update || true
rust:
  - stable
  - beta
  - nightly
  - 1.26.0
matrix:
  include:
    - rust: stable
      script:
        - cargo test --examples
        - cargo test --no-default-features --verbose
    - rust: nightly
      before_script:
        - rustup component add rustfmt --toolchain nightly
      script:
        - cargo +nightly fmt -- --check
  allow_failures:
    - rust: nightly
